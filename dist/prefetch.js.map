{"version":3,"sources":["node_modules/throttles/dist/index.mjs","node_modules/requestidlecallback/index.js","prefetch.js"],"names":["n","t","u","f","length","shift","push","prefetch","toAdd","isDone","get","url","window","fetch","mode","urls","promises","map","then","Promise","all"],"mappings":"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","file":"prefetch.js","sourceRoot":"..","sourcesContent":["export default function(n){n=n||1;var t=[],u=0;function f(){u<n&&t.length>0&&(t.shift()(),u++)}return[function(n){t.push(n)>1||f()},function(){u--,f()}]}","(function (factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine([], factory);\n\t} else if (typeof module === 'object' && module.exports) {\n\t\tmodule.exports = factory();\n\t} else {\n\t\twindow.idleCallbackShim = factory();\n\t}\n}(function(){\n\t'use strict';\n\tvar scheduleStart, throttleDelay, lazytimer, lazyraf;\n\tvar root = typeof window != 'undefined' ?\n\t\twindow :\n\t\ttypeof global != undefined ?\n\t\t\tglobal :\n\t\t\tthis || {};\n\tvar requestAnimationFrame = root.cancelRequestAnimationFrame && root.requestAnimationFrame || setTimeout;\n\tvar cancelRequestAnimationFrame = root.cancelRequestAnimationFrame || clearTimeout;\n\tvar tasks = [];\n\tvar runAttempts = 0;\n\tvar isRunning = false;\n\tvar remainingTime = 7;\n\tvar minThrottle = 35;\n\tvar throttle = 125;\n\tvar index = 0;\n\tvar taskStart = 0;\n\tvar tasklength = 0;\n\tvar IdleDeadline = {\n\t\tget didTimeout(){\n\t\t\treturn false;\n\t\t},\n\t\ttimeRemaining: function(){\n\t\t\tvar timeRemaining = remainingTime - (Date.now() - taskStart);\n\t\t\treturn timeRemaining < 0 ? 0 : timeRemaining;\n\t\t},\n\t};\n\tvar setInactive = debounce(function(){\n\t\tremainingTime = 22;\n\t\tthrottle = 66;\n\t\tminThrottle = 0;\n\t});\n\n\tfunction debounce(fn){\n\t\tvar id, timestamp;\n\t\tvar wait = 99;\n\t\tvar check = function(){\n\t\t\tvar last = (Date.now()) - timestamp;\n\n\t\t\tif (last < wait) {\n\t\t\t\tid = setTimeout(check, wait - last);\n\t\t\t} else {\n\t\t\t\tid = null;\n\t\t\t\tfn();\n\t\t\t}\n\t\t};\n\t\treturn function(){\n\t\t\ttimestamp = Date.now();\n\t\t\tif(!id){\n\t\t\t\tid = setTimeout(check, wait);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction abortRunning(){\n\t\tif(isRunning){\n\t\t\tif(lazyraf){\n\t\t\t\tcancelRequestAnimationFrame(lazyraf);\n\t\t\t}\n\t\t\tif(lazytimer){\n\t\t\t\tclearTimeout(lazytimer);\n\t\t\t}\n\t\t\tisRunning = false;\n\t\t}\n\t}\n\n\tfunction onInputorMutation(){\n\t\tif(throttle != 125){\n\t\t\tremainingTime = 7;\n\t\t\tthrottle = 125;\n\t\t\tminThrottle = 35;\n\n\t\t\tif(isRunning) {\n\t\t\t\tabortRunning();\n\t\t\t\tscheduleLazy();\n\t\t\t}\n\t\t}\n\t\tsetInactive();\n\t}\n\n\tfunction scheduleAfterRaf() {\n\t\tlazyraf = null;\n\t\tlazytimer = setTimeout(runTasks, 0);\n\t}\n\n\tfunction scheduleRaf(){\n\t\tlazytimer = null;\n\t\trequestAnimationFrame(scheduleAfterRaf);\n\t}\n\n\tfunction scheduleLazy(){\n\n\t\tif(isRunning){return;}\n\t\tthrottleDelay = throttle - (Date.now() - taskStart);\n\n\t\tscheduleStart = Date.now();\n\n\t\tisRunning = true;\n\n\t\tif(minThrottle && throttleDelay < minThrottle){\n\t\t\tthrottleDelay = minThrottle;\n\t\t}\n\n\t\tif(throttleDelay > 9){\n\t\t\tlazytimer = setTimeout(scheduleRaf, throttleDelay);\n\t\t} else {\n\t\t\tthrottleDelay = 0;\n\t\t\tscheduleRaf();\n\t\t}\n\t}\n\n\tfunction runTasks(){\n\t\tvar task, i, len;\n\t\tvar timeThreshold = remainingTime > 9 ?\n\t\t\t9 :\n\t\t\t1\n\t\t;\n\n\t\ttaskStart = Date.now();\n\t\tisRunning = false;\n\n\t\tlazytimer = null;\n\n\t\tif(runAttempts > 2 || taskStart - throttleDelay - 50 < scheduleStart){\n\t\t\tfor(i = 0, len = tasks.length; i < len && IdleDeadline.timeRemaining() > timeThreshold; i++){\n\t\t\t\ttask = tasks.shift();\n\t\t\t\ttasklength++;\n\t\t\t\tif(task){\n\t\t\t\t\ttask(IdleDeadline);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(tasks.length){\n\t\t\tscheduleLazy();\n\t\t} else {\n\t\t\trunAttempts = 0;\n\t\t}\n\t}\n\n\tfunction requestIdleCallbackShim(task){\n\t\tindex++;\n\t\ttasks.push(task);\n\t\tscheduleLazy();\n\t\treturn index;\n\t}\n\n\tfunction cancelIdleCallbackShim(id){\n\t\tvar index = id - 1 - tasklength;\n\t\tif(tasks[index]){\n\t\t\ttasks[index] = null;\n\t\t}\n\t}\n\n\tif(!root.requestIdleCallback || !root.cancelIdleCallback){\n\t\troot.requestIdleCallback = requestIdleCallbackShim;\n\t\troot.cancelIdleCallback = cancelIdleCallbackShim;\n\n\t\tif(root.document && document.addEventListener){\n\t\t\troot.addEventListener('scroll', onInputorMutation, true);\n\t\t\troot.addEventListener('resize', onInputorMutation);\n\n\t\t\tdocument.addEventListener('focus', onInputorMutation, true);\n\t\t\tdocument.addEventListener('mouseover', onInputorMutation, true);\n\t\t\t['click', 'keypress', 'touchstart', 'mousedown'].forEach(function(name){\n\t\t\t\tdocument.addEventListener(name, onInputorMutation, {capture: true, passive: true});\n\t\t\t});\n\n\t\t\tif(root.MutationObserver){\n\t\t\t\tnew MutationObserver( onInputorMutation ).observe( document.documentElement, {childList: true, subtree: true, attributes: true} );\n\t\t\t}\n\t\t}\n\t} else {\n\t\ttry{\n\t\t\troot.requestIdleCallback(function(){}, {timeout: 0});\n\t\t} catch(e){\n\t\t\t(function(rIC){\n\t\t\t\tvar timeRemainingProto, timeRemaining;\n\t\t\t\troot.requestIdleCallback = function(fn, timeout){\n\t\t\t\t\tif(timeout && typeof timeout.timeout == 'number'){\n\t\t\t\t\t\treturn rIC(fn, timeout.timeout);\n\t\t\t\t\t}\n\t\t\t\t\treturn rIC(fn);\n\t\t\t\t};\n\t\t\t\tif(root.IdleCallbackDeadline && (timeRemainingProto = IdleCallbackDeadline.prototype)){\n\t\t\t\t\ttimeRemaining = Object.getOwnPropertyDescriptor(timeRemainingProto, 'timeRemaining');\n\t\t\t\t\tif(!timeRemaining || !timeRemaining.configurable || !timeRemaining.get){return;}\n\t\t\t\t\tObject.defineProperty(timeRemainingProto, 'timeRemaining', {\n\t\t\t\t\t\tvalue:  function(){\n\t\t\t\t\t\t\treturn timeRemaining.get.call(this);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})(root.requestIdleCallback)\n\t\t}\n\t}\n\n\treturn {\n\t\trequest: requestIdleCallbackShim,\n\t\tcancel: cancelIdleCallbackShim,\n\t};\n}));\n","// @ts-check\nimport throttles from 'throttles';\nimport { request } from './node_modules/requestidlecallback';\n\nconst [toAdd, isDone] = throttles(1);\n\n/**\n * @param {*} url\n */\nfunction get(url) {\n    if ('fetch' in window) {\n        return fetch(url, {\n            mode: 'no-cors'\n        });\n    }\n}\n\n/**\n * Prefetch array urls one by one when idle\n * @param {string[]} urls\n * @returns {Promise<void[]>}\n */\nfunction prefetch(urls) {\n    const promises = urls.map(url => {\n        return toAdd(() => {\n            request(() => get(url).then(isDone));\n        });\n    });\n    return Promise.all(promises);\n}\n\nexport default prefetch;\n"]}